.X:2
.F:The Tool Shop...ProDoor System Manager v3.0...02-Jun-89 -$$$-


                         ProDoor System Manager

                         Version 3.0, 02-Jun-89


                    Interactive Configuration Utility

                    For use with ProDoor Version 3.0


     Copyright (C) 1987, 1989 Samuel H. Smith;  ALL RIGHTS RESERVED




                            TABLE OF CONTENTS
                            =================


   MAIN MENU. . . . . . . . . . . . . . . . . . . . . . . . .  2


   EDIT CONFIGURATION FILE. . . . . . . . . . . . . . . . . .  4
      GENERAL CONFIGURATION . . . . . . . . . . . . . . . . .  4
      ARCHIVE MANIPULATION COMMANDS . . . . . . . . . . . . .  5
      ANSI COLOR CONFIGURATION. . . . . . . . . . . . . . . .  6
      EXTENDED SECURITY CONFIGURATION . . . . . . . . . . . .  6
      EXTENDED PROTOCOL CONFIGURATION . . . . . . . . . . . .  7


   EDIT CONFERENCE DEFINITIONS. . . . . . . . . . . . . . . . 10

   EDIT EXTENDED USER DATA. . . . . . . . . . . . . . . . . . 13

   INSERT GROUP CONFERENCE. . . . . . . . . . . . . . . . . . 15

   REMOVE GROUP CONFERENCE. . . . . . . . . . . . . . . . . . 16

   RENUMBER CONFERENCES . . . . . . . . . . . . . . . . . . . 17


   FILE FORMATS . . . . . . . . . . . . . . . . . . . . . . . 18
      CONFINFO FILE . . . . . . . . . . . . . . . . . . . . . 18
      EXTUSER FILE. . . . . . . . . . . . . . . . . . . . . . 19
      USERS FILE. . . . . . . . . . . . . . . . . . . . . . . 21
      DATA TYPES. . . . . . . . . . . . . . . . . . . . . . . 21



The ProDoor System Manager, PROSM.EXE, is an interactive configuration
utility for use with ProDoor.  It allows you to view and modify the
contents of ProDoor's PROD.CNF, CONFINFO and EXTUSER data files.

The INSTALL procedure creates a CONFIG.BAT batch file for you.  Use the
CONFIG command to run the System Manager.


        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        *                         IMPORTANT                         *
        *                                                           *
        *      PRODOOR'S "CONFINFO" DATA FILE TAKES THE PLACE       *
        *      OF YOUR NORMAL "CNAMES" DATA FOR CONFERENCE          *
        *      DEFINITION.  PLEASE DO NOT USE PCBSETUP TO ALTER     *
        *      CONFERENCE DEFINITIONS!  USE PROSM'S CONFERENCE      *
        *      DEFINITION FUNCTION INSTEAD.  WHEN YOU ARE           *
        *      FINISHED, THE F10 [UPDATE CNAMES] FUNCTION KEY       *
        *      TO UPDATE THE CNAMES FILE WITH CONFINFO CHANGES.     *
        *                                                           *
        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


The System Manager has eight main functions:

A - Edit Configuration File
---------------------------

The Edit Configuration File function allows you to view and modify the
contents of ProDoor's PROD.CNF file.


B - Edit Conference Definitions
-------------------------------

The Edit Conference Definition function is an editor for the CONFINFO
file.  It allows you to maintain ProDoor and ProEdit conference
information for ALL message areas available through the door.  Use this
selection to define "extended" conferences not available from PCBoard.

This function also has the ability to create a new CNAMES file
containing any changes in definitions of conferences 0..39.


C - Edit Extended User Data
---------------------------

The Edit Extended User Data function is an editor for the EXTUSER file.
It allows you to maintain conference registration and message pointers
for ProDoor users.  It displays door usage count, last date in door and
allows editing of "earned K bytes" record.



D - Generate ProPack Batch File
-------------------------------

The Generate ProPack Batch File function reads your conference
configuration data and automatically generates a batch file,
PACKALL.BAT, which can be used in an event to pack all of your
conference message files.


E - Insert Group Conference
---------------------------

The Insert Group Conference function allows you to automatically
register users in a conference according to a range of security levels.


F - Remove Group Conference
---------------------------

The Remove Group Conference function allows you to automatically remove
users from a conference according to a range of security levels.


G - Pack Extended User File
---------------------------

The Pack Extended User File function updates your USERS and EXTUSER data
files to include only currently registered users.  The EXTUSER file is
reordered to follow the order in USERS, speeding the some other functions
of this program.


H - Renumber Conferences
------------------------

The Renumber Conferences function exchanges the information for two
specified conference numbers and updates your CONFINFO, USERS and
EXTUSER data files accordingly.  CNAMES is not updated so renumbering
conference numbers less than 40 is not recommended.


                        EDIT CONFIGURATION FILE
                        =======================

The Edit Configuration File function allows you to view and modify the
contents of ProDoor's PROD.CNF file.

Use the PGUP and PGDN keys to change pages.  Press ESC to return to the
System Manager main menu.



General Configuration
---------------------

Use slow BIOS com driver (Y/N). . N
   Select the SLOW driver only if the normal, interrupt driven driver
   fails to work.

Transfer overhead time (seconds). 10
   This entry is for an estimate of how long it takes ProDoor to  load
   your protocol driver, start the transfer, and recycle to  the main
   command prompt.  It is used in calculation of transfer  speed for
   non-dsz protocols.

Transfer "PLAYPEN" directory. . . I:\PLAY
   The playpen directory is used to hold uploads, and possibly downloads
   that are in-progress.  In network systems, the node  number is
   automatically appended to the end of the directory  name.  You will
   get the best performance if this is a  subdirectory on a RAM disk.

Held (dup) upload directory . . . C:\PCB\HOLD
   This is the file directory where "HELD" uploads will be stored.   An
   upload is "HELD" for sysop review if it's name duplicates another
   file, conflicts with UPSEC, or contains an invalid character.

Held (dup) upload listing . . . . C:\PCB\ADMIN\HELD
   This is the filename of the "listing" file for descriptions of
   "held" uploads.


Max messages per ZIPM run . . . . 500
   This entry controls the maximum number of messages that the Zip-Mail
   function will handle in a single run.  Use it to prevent the
   resulting scratch file from being too large.

        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        *                                                           *
        *      PLEASE INSURE THAT YOU HAVE SUFFICIENT DISK SPACE    *
        *      FOR THE NUMBER OF ZIPM MESSAGES YOU SELECT!  PLAN    *
        *      ON EACH MESSAGE TAKING ABOUT 1K OF DISK SPACE.       *
        *                                                           *
        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


Directory for SCRATCH.ZIP . . . . I:\SCR
   This is the directory used to hold the SCRATCH zipfile, used by the
   zipfile extract,  REPACK, and ZIPM functions.  Specify a large RAMDISK
   for fastest operation.  THIS MUST NOT BE THE SAME AS THE 'PLAYPEN'!!!

Scratch zipfile name prefix . . . TOOLS
   This is used to build the  SCRATCH zipfile filename.  Change this to
   identify your board.  The Tool Shop uses 'TOOLS', for example.

Mail zipfile name prefix. . . . . TOOLM
   This is used to build the ZIPM zipfile filename.  Change this to
   identify your board.  The Tool Shop uses 'TOOLM', for example.
   THIS MUST NOT BE THE SAME AS THE 'SCRATCH ZIPFILE PREFIX'!!!

        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        *                                                           *
        *      THE 'SCRATCH ZIPFILE NAME PREFIX' AND 'MAIL          *
        *      ZIPFILE PREFIX' SETTINGS *MUST* BE DIFFERENT!        *
        *      IF THEY ARE THE SAME, PRODOOR WILL SELECT SCRATCH    *
        *      FILES TWICE SINCE IT LOOKS FOR BOTH NAMES.           *
        *                                                           *
        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Archive manipulation commands
-----------------------------

Because of the recent conflicts over archive file format standards,
ProDoor no longer has a hard-coded internal handler for archive file
manipulation.  Instead, calls are made to outside commands to process
archives.  This configuration panel allows you to specify the commands
(and hence the archive file format) that are to be used.

Please note that the archive commands are loaded "on top of" ProDoor and
will require additional memory.  Because of this, I recommend that you
use the "small" version of any archive utility (PKPAKJR, for example).

Files listing command . . . . . . . . . PRO-R $N$ $TIME$ $R$
   This command is used to get a listing of files contained inside an
   archive file.  The default is to call PRO-R.BAT, which includes
   support for several common compression formats.

Type files to console command . . . . . PRO-V $R$
   This command is used to view specified text files within an archive.
   The command must direct the text files into the file specified by the
   "result file" macro $R$.

Extract from file to file command . . . PRO-X $R$
   This command must extract the specified component files from one
   archive and place them into another, possibly creating a new archive
   in the process.

RePack archive command. . . . . . . . . PRO-P $R$
   This command is used by the REPACK command.  The standard batch file,
   PRO-P.BAT has the ability to convert among the various formats which
   are supported.

Test archive integrity command. . . . . PRO-T $R$
   This command is used to test the validity of an archive file.

Test failure message suffix . . . . . . .ZIP has errors!
   If this message appears in the result file generated by the test
   archive command, the specified archive file will be deleted.  The
   full archive file name must be at the beginning of the line for this
   feature to work.

        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        *                                                           *
        *      PRODOOR DETECTS CORRUPTED UPLOAD FILES BY LOOKING    *
        *      FOR THE 'TEST FAILURE MESSAGE SUFFIX' MESSAGE IN     *
        *      THE TEST RESULT LOG.  IF YOUR TEST RESULT LOG DOES   *
        *      NOT PRODUCE THE *EXACT* ERROR MESSAGE YOU HAVE       *
        *      CONFIGURED, THE BAD FILE WILL NOT BE DETECTED.       *
        *                                                           *
        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


Extended Security Configuration
-------------------------------

The ProDoor Extended Security Configuration panel allows you to control
access to all door functions.


Function -
   This entry identifies the function letter being configured.  The
   "spare" entries are reserved for future commands.  Notice that
   "single" and "batch" upload/download functions have different
   entries.  This allows you to restrict batch functions by  security
   level, if desired.


Security Level -
   This is the minimum security level required for a user to use the
   specified function.


Time Factor -
   This entry controls how time is "charged" for the use of each
   function.  A time factor of 1.0 is the normal "real time" charge
   rate.  Factors < 1 give the caller more time when using the
   function.  Factors > 1 give the caller less time.  Examples:



       Time factor                          Meaning
       -----------         -----------------------------------------

           1.0             Normal time, as in PCBoard

           0.0             The clock is "stopped" in this function

          -1.0             The user gets extended time equal to the time
                           spent in this function.

           2.0             The user is charged "double" for time spent
                           in this function.


Byte Factor -
   This entry applies only to upload and download functions.  It
   controls how the function updates the caller's "Download Bytes
   Available" record.  A value of 1.0 charges the user directly for
   each byte transferred.  A factor or 0 does not charge.  A factor  of
   -1 gives back 1 byte for each byte transferred.   Generally
   speaking, use 1.0 for downloads and at least -1 for uploads.  I  use
   this feature to implement a byte-based upload/download  ratio.  With
   the upload factors set at -5, the callers can  download 5 bytes for
   each byte uploaded.  This, coupled with  ProDoor's ability to carry
   "earned bytes" forward from call to  call, allows you to better
   reward your best callers.


(0) Idle time . . . . . .     2               1.5            1.0
   This function code is used to control the charge for "idle"  time.  A
   time factor of 1.5 will charge callers extra for  letting the board
   sit "idle".

(1) Download batch. . . .     2               1.0            1.0
(2) Upload batch. . . . .     2               -0.5           -5.0
   These function codes apply to protocols that allow more than 1
   filespec at a time.  NOTICE THAT UPLOADS USE NEGATIVE NUMBERS!

        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        *                                                           *
        *      THE DEFAULT CONFIGURATION GRANTS A 'BYTE CREDIT'     *
        *      OF 5 DOWNLOAD BYTES FOR EACH BYTE UPLOADED.  IF      *
        *      YOU DO NOT WANT THIS EXTRA DOWNLOAD CREDIT, YOU      *
        *      MUST CHANGE THE 'UPLOAD' AND 'UPLOAD BATCH' BYTE     *
        *      FACTORS FROM -5.0 TO 0.0!                            *
        *                                                           *
        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


(3) Private message entry     2               1.0            1.0
   This function code allows you to restrict private message entry  by
   security level.  It also allows you to have a different time  factor
   for public versus private message entry.

(4) Reply message . . . .     2               1.0            1.0
   This function code allows you to control the time charges for a
   public message that is in reply to some other message.  This  gives
   you the ability to differentiate between "new" and "old"  message
   threads.



Extended Protocol Configuration
-------------------------------

Protocol
 Name
   This entry is the "name" for the protocol.  It is displayed in  the
   protocol menu, and before any transfer in the protocol.

Menu
Code
   This is the menu letter used to identify the protocol.

Trans/
Recv
   Enter a "T" here if the protocol "transmits" data to the user  (i.e.
   download protocols).  Enter a "R" if the protocol  "receives" data
   from the user (i.e. upload protocols).

File
Specs
   This entry controls the number of filespecs that are allowed  with
   the protocol.  There are a few special cases to consider:

       File specs                       Meaning
       ----------  --------------------------------------------------
           1       The protocol is "non batch".  A full filename is
                   passed to the driver program.

           0       The protocol is "automatic batch".  Use this  only
                   with batch "receive" protocols that get the
                   filenames from the caller's end of the transfer.

           2..9    These numbers allow the user to specify a  variable
                   number of "filespecs".  A filespec may  contain
                   wildcards, resulting in up to 100 files in a given
                   batch.   If the protocol must have  the filenames on
                   the command-line, a value of 2  or 3 is generally the
                   limit.  Protocols that  don't specify every name may
                   use values up to 9.   See the Command Line section
                   for more  information on this.

Estimated
Efficiency
   This entry is used to estimate how efficient a given protocol is  at
   sending or receiving data.  Legal values range from 0.1 to  0.99.  


Command Line
   This entry is the "command line" used to call up the protocol
   driver.  It must be entered exactly as if you were calling up  the
   driver from a DOS prompt.   There are a few special cases on  the
   command line:

          Entry                            Meaning
          -----    -----------------------------------------------------

           $B$     This is replaced with the caller's connect speed, or
                   baud rate.  This is the speed used to open the com
                   port.

           $C$     This is replaced with the caller's actual connect speed,
                   and is used only for file transfer time estimates.

           $N$     This is replaced with the COM port number in  use.

           $NODE$  This is replaced with the current node number and can
                   be used to build command-lines in multi node systems.

           $TIME$  This is replaced with the number of minutes of time
                   remaining in the current login.

           $@$     This is replaced with '@c:\pcb\$door.nam', which
                   refers to a file that will list the names of the
                   individual files to be transmitted.  This  feature is
                   only valid for DSZ versions 880423 or  later.  Use
                   this to allow more than 3 filespecs  per transfer.
                        NOTE: THIS FEATURE REQUIRES A VERSION OF
                              DSZ DATED MAY-1988 OR LATER!

           *.*     This causes ProDoor to copy all of the selected
                   files into the "playpen" directory prior to  starting
                   the transfer.  The door then instructs  the protocol
                   driver to send "all" files from the  playpen.  Use
                   this to allow more than 3  filespecs on any
                   batch-compatible protocol.   Because of all the disk
                   activity involved in  copying the files, I recommend
                   you use this  option only if you have a RAM DISK for
                   your  playpen.


                       EDIT CONFERENCE DEFINITIONS
                       ===========================

The Edit Conference Definition function is an editor for the CONFINFO
file.  It allows you to maintain ProDoor and ProEdit conference
information for ALL message areas available through the door.  Use this
selection to define "extended" conferences not available from PCBoard.

ProDoor compiles the standard CNAMES data file into a random-access
file, CONFINFO, for quicker access and reduced memory requirements. You
may define up to 255 different conferences in this file.

The PCBoard CNAMES file is accessed ONLY if the CONFINFO file is missing
or has been manually deleted.  It is up to you to delete CONFINFO (so
ProDoor will re-build it) if you ever change the contents of your CNAMES
file.  If the CONFINFO file exists, ProDoor will not automatically
recognize changes made in your CNAMES file.

This function also has the ability to create a new CNAMES file
containing any changes in definitions of conferences 0..39.


        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        *                         IMPORTANT                         *
        *                                                           *
        *      PRODOOR'S "CONFINFO" DATA FILE TAKES THE PLACE       *
        *      OF YOUR NORMAL "CNAMES" DATA FOR CONFERENCE          *
        *      DEFINITION.  PLEASE DO NOT USE PCBSETUP TO ALTER     *
        *      CONFERENCE DEFINITIONS!  USE PROSM'S CONFERENCE      *
        *      DEFINITION FUNCTION INSTEAD.  WHEN YOU ARE           *
        *      FINISHED, THE F10 [UPDATE CNAMES] FUNCTION KEY       *
        *      TO UPDATE THE CNAMES FILE WITH CONFINFO CHANGES.     *
        *                                                           *
        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *


Network systems may wish to define multiple CONFINFO files.  To do this,
you must include the statement
        SET CONFINFO=drive:\directory\filename
in your calling batch file to specify which CONFINFO file is being
modified.



Here is a typical display:

                        ProDoor: [Hardware] Message Area             Area: 42

ีออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ Area Name. . . . . . . . . . Hardwareฐฐฐ                                   ฐ
ณ Public Conference. . . . . . N            Echo Mail in Conference. . . Y   ฐ
ณ Min Security to Auto-Reg . . 45           Added Security . . . . . . . 0__ ฐ
ณ Make all Uploads Private . . N            Added Time (minutes) . . . . 0__ ฐ
ณ Make all Messages Private. . N            Number of Message Blocks . . 4__ ฐ
ณ                                                                            ฐ
ณ ProPack Command Options. . . 2000 /d /r______                              ฐ
ณ Message File Path Name . . . C:\PCB\HARDWARE\HARDWARE_______               ฐ
ณ Conference News Path Name. . C:\PCB\HARDWARE\HNEWS__________               ฐ
ณ Public Upload DIR File . . . C:\PCB\MAIN\DIR14______________               ฐ
ณ Public Upload Directory. . . E:\UPLOAD\_____________________               ฐ
ณ Private Upload DIR File. . . C:\PCB\MAIN\PRIVATE____________               ฐ
ณ Private Upload Directory . . E:\PRIVATE\____________________               ฐ
ณ                                                                            ฐ
ณ           Qmail          Menu File                   Listing File          ฐ
ณ Doors . . . . . C:\PCB\GEN\DOORS____________  C:\PCB\MAIN\DOORS.DAT_______ ฐ
ณ Bulletins . Y . C:\PCB\GEN\BLT______________  C:\PCB\GEN\BLT.LST__________ ฐ
ณ File Areas. N . C:\PCB\GEN\DIR______________  C:\PCB\GEN\DIR.LST__________ ฐ
ณ Download Paths. . . . (Listing Only). . . . . C:\PCB\GEN\DLPATH.LST_______ 
ิออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออพ

 F9   [initialize]    F10  [update CNAMES file]
 PgDn [next area]     PgUp [prior area]           ESC [exit]       ProSM 3.0แ



Function keys
-------------

ESC -   Exit this screen.

PgDn -  Scroll to the next higher conference.

PgUp -  Scroll to the next lower conference; selects the last conference
        when used on conference 0.

F9 -    Initialize the current conference with standard defaults.  Use
        this option to "redefine" an existing conference.  All new
        values will be based on your "Main Board" definitions and the
        specified new conference name.

F10 -   Update CNAMES file.  This selection reads all conference
        definitions from the CONFINFO file and updates your standard
        CNAMES file with the latest information.  This means you should
        not use PCBSETUP to change CNAMES data -- use this function key
        instead.


Data entry
----------

Area Name. . . . . . . . . . Hardwareฐฐฐ
   This entry defines the Name of the new conference.  This is the
   message printed in the Main Menu Command and Mail Command prompts for
   the conference.  It can also be used with the (J)oin command for
   direct access to a conference, regardless of the conference number.

Public Conference. . . . . . Y
   This entry defines access for unregistered users in the conference.
   If the setting is 'Y', prodoor will automatically make a caller a
   member of the conference during the first access.  When set to 'N'
   the conference will be available only to a) callers already
   registered in the conference, and b) callers specifically added to
   the conference through the Extended User File Editor, ExtEdit.exe.

Minimum Security to Auto-Register . . 89
   This entry defines the minimum security level needed to automatically by
   registered in a non-public conference.  If the user has high enough
   security he will automatically enrolled into the conference.

Make all Uploads Private . . N
   This entry controls the posting of new uploads to this conference.
   If set to 'Y', all new uploads will be posted in the private
   directory.  If set to 'N', uploads will be posted to the public
   upload directory (unless the caller requests private uploading with a
   '/' at the start of the description).

Make ALL Messages Private. . N
   This entry controls the posting of new messages to this conference.
   If set to 'Y', all new messages will be flagged as 'RECEIVER ONLY',
   and must be manually unprotected by the sysop before the public will
   have access to them.  When set to 'N' the message security is
   specified by the caller.

Echo Mail in Conference. . . Y
   This entry controls the "Echo to other systems?" prompt.  If set to
   'Y' the caller will be asked if a new message is to be echoed, and if
   the answer is yes, the "(echo)" flag will be set in the new message.
   If set to 'N' no new message will be given the "(echo)" flag.

Added Security . . . . . . . 0__
   This entry allows you to temporarily increase a caller's security
   level while accessing the conference.

Added Time (minutes) . . . . 0__
   This entry allows you to grant extra time to a caller when joining
   this conference.  The extra time is granted only once per day.  If
   multiple conferences have 'added time', the caller will be granted up
   to the highest 'added time' of the conferences he accesses that day.

Number of Message Blocks . . 4__
   This entry controls the size of the index file, and therefore the
   maximum number of consecutive message numbers that may be present in
   a conference.  Each block allocates 1024 message numbers.  You are
   allowed up to 32 blocks, but should use 14 or fewer blocks if you are
   using the ProPack utility to pack the conference files.

ProPack Command Options. . . 2000 /d /r_____
   This entry specifies any options you want to use in conjunction with
   the ProPack utility.  See ProPack documentation for full information
   on options that are available.   This example will pack the message
   file, retain 2000 messages, delete duplicate messages, and delete
   RECEIVED+PRIVATE messages.

Message File Path Name . . . C:\PCB\HARDWARE\HARDWARE_______
   This entry specifies the full filename of the conference message
   file.  The message file and the associated index file will be
   automatically created by ConfEdit, if needed.

Conference News Path Name. . C:\PCB\HARDWARE\HNEWS__________
   This entry specifies the conference news message file.  Depending on
   your settings, ProDoor can display the file the first time a caller
   joins a conference during a day.

Public Upload DIR File . . . C:\PCB\MAIN\DIR14______________
Public Upload Directory. . . E:\UPLOAD\_____________________
   These entries control the placement and scanning of public uploads
   while inside this conference.  Since PCBoard's file management
   utilities do not recognize extended conference, I recommend that you
   use only existing upload directories for your extended conferences.
   This will ensure that you will be able to access them for file
   maintenance.

Private Upload DIR File. . . C:\PCB\MAIN\PRIVATE____________
Private Upload Directory . . E:\PRIVATE\____________________
   These entries control the placement of private (or sysop-only)
   uploads while inside the conference.

                         Menu File                   Listing File
Doors . . . . . C:\PCB\GEN\DOORS____________  C:\PCB\MAIN\DOORS.DAT_______
   The doors menu file entry controls the doors menu display while
   inside this conference.  The listing file controls the actual door
   programs and associated security controls.

           Qmail         Menu File                   Listing File
Bulletins . N . C:\PCB\GEN\BLT______________  C:\PCB\GEN\BLT.LST__________
   The bulletins menu file entry controls the bulletins menu display while
   inside this conference.  You should use existing files defined for a
   standard conference so you can use the PCBoard utilities to maintain
   the listing file.  The Qmail flag controls downloading of BLT files.

           Qmail         Menu File                   Listing File
File Areas. Y . C:\PCB\GEN\DIR______________  C:\PCB\GEN\DIR.LST__________
   The file areas file entry controls the file areas menu display while
   inside this conference.  You should use existing files defined for a
   standard conference so you can use the PCBoard utilities to maintain
   the listing file.  The Qmail flag controls new file scans.

Download Paths. . . . (Listing Only). . . . . C:\PCB\GEN\DLPATH.LST_______
   The download paths entry controls the listing of download directories
   that are available while inside this conference.  You should use a
   file defined for a standard conference so you can use the PCBoard
   utilities to maintain the listing file.


                          EDIT EXTENDED USER DATA
                          =======================

The Edit Extended User Data function is an editor for the EXTUSER file.
It allows you to maintain conference registration and message pointers
for ProDoor users.  It displays door usage count, last date in door and
allows editing of "earned K bytes" record.

ProDoor automatically maintains EXTUSER, the Extended User File.  The
file stores message pointers for all extended conferences, as well as
conference registration and scan preferences.

Some network systems require an environment variable to specify the
location of the EXTUSER data file to allow sharing by all nodes.  In
this case, be sure to include the statement
        SET EXTUSER=drive:\directory\filename
in the calling batch file to specify the proper file path.  This feature
may also be used to interface with a future version of the Qmail door.


Here is a typical display:

                     ProDoor: Extended User File Editor

ีออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  User Name:         SAMUEL SMITH                       User Rec: 0         
ณ  Times in ProDoor:  255                             ExtUser Rec: 0         ฐ
ณ  Earned K Bytes:    783ฐฐ                          Last in Door: 12-11-88  ฐ
ณ  Security Level:    120                                                    ฐ
ณ                                                                            ฐ
ณ Cnf Mem- Last Cnf Mem- Last Cnf Mem- Last Cnf Mem- Last Cnf Mem- Last  ฐ
ณ No. ber  Read No. ber  Read No. ber  Read No. ber  Read No. ber  Read  ฐ
ณ ฤฤฤฤฤฤฤฤฤฤฤฤฤ ฤฤฤฤฤฤฤฤฤฤฤฤฤ ฤฤฤฤฤฤฤฤฤฤฤฤฤ ฤฤฤฤฤฤฤฤฤฤฤฤฤ ฤฤฤฤฤฤฤฤฤฤฤฤฤ  ฐ
ณ 40:  Y  1____ 50:  N  0____ 60:  N  0____ 70:  N  0____ 80:  N  0____  ฐ
ณ 41:  Y  1____ 51:  N  0____ 61:  N  0____ 71:  N  0____ 81:  N  0____  ฐ
ณ 42:  Y  6____ 52:  N  0____ 62:  N  0____ 72:  N  0____ 82:  N  0____  ฐ
ณ 43:  N  0____ 53:  N  0____ 63:  N  0____ 73:  N  0____ 83:  N  0____  ฐ
ณ 44:  N  0____ 54:  N  0____ 64:  N  0____ 74:  N  0____ 84:  N  0____  ฐ
ณ 45:  N  0____ 55:  N  0____ 65:  N  0____ 75:  N  0____ 85:  N  0____  ฐ
ณ 46:  N  0____ 56:  N  0____ 66:  N  0____ 76:  N  0____ 86:  N  0____  ฐ
ณ 47:  N  0____ 57:  N  0____ 67:  N  0____ 77:  N  0____ 87:  N  0____  ฐ
ณ 48:  N  0____ 58:  N  0____ 68:  N  0____ 78:  N  0____ 88:  N  0____  ฐ
ณ 49:  N  0____ 59:  N  0____ 69:  N  0____ 79:  N  0____ 89:  N  0____  ฐ
ิออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออพ
 F1   [next 40]       F2   [prior 40]        F3  [find user]
 PgDn [next user]     PgUp [prior user]      ESC [exit]             ProSM 3.0แ



User Name:         SAMUEL SMITH
   This display indicates the user record being accessed.  Use the PgDn
   [next user], PgUp [prior user] and F3 [find user] function keys to
   select users.  The "scroll bar" at the right margin of the screen
   shows you your relative position within the users file.  Note that
   ExtEdit can access ONLY user records that have corresponding entries
   in ProDoor's EXTUSER file.  If a user has never accessed ProDoor 3.0,
   his record will not be available to ExtEdit.

Times in ProDoor:  255
Last in Door: 12-11-88
   These displays show current information about prodoor users, but
   cannot be modified.

User Rec: 0
ExtUser Rec: 0
   This displays the PCBoard USERS file record number and the
   corresponding EXTUSER record number.

Earned K Bytes:    783
   This entry records the users total "earned K bytes".  You can
   position the cursor over this entry and enter a new value if desired.

Security Level:    120
   This entry is a quick way to change a user's security level without
   the need to access PCBSM.


The extended conference information is presented in tabular form, with
five columns, each listing 10 conferences.  This format cannot display
all conferences at once.  Use the F1 [next 40 conferences] and F2 [prior
40 conferences] function keys to scroll the conference tables left and
right, to gain access to the desired conference number.

Each conference table is presented in this format:

        Cnf  Mem-  Last
        No.  ber   Read
        ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
        40:   Y   1____
        41:   Y   1____
        42:   Y   6____


The "Cnf No." entry indicates the conference number being accessed.

The "Mem-ber" entry controls the user's registration in this conference.
If the conference is marked "PUBLIC" you don't need to edit your user
conference registration -- ProDoor will do it automatically the first
time the caller accesses the conference.   You can change this entry to
manually enroll a user in a private conference, or to remove a caller
from a non-public conference.

The "Last Read" entry controls the user's message pointer for this
conference.


                        INSERT GROUP CONFERENCE
                        =======================

The Insert Group Conference function allows you to automatically
register users in a conference according to a range of security levels.



Here is a typical display:


                       ProDoor: Insert Group Conference

ีออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ                                                                            ณ
ณ   Minimum security level:  10_                                             ณ
ณ                                                                            ณ
ณ   Maximum security level:  10_                                             ณ
ณ                                                                            ณ
ณ   First conference number: 45_                                             ณ
ณ                                                                            ณ
ณ   Last conference number:  49_                                             ณ
ณ                                                                            ณ
ิออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออพ

 PgDn [begin]                                     ESC [exit]       ProSM 3.0แ



Minimum security level:  10_
Maximum security level:  10_
   These entries specify the range of security levels to be inserted
   in the specified conference.


First conference number:  45
Last conference number:   49
   These entries specify the range of conferences to be inserted into
   the selected user registrations.


Press the PGDN key to begin the Insert Group function.
Press the ESC key to cancel the operation.

                        REMOVE GROUP CONFERENCE
                        =======================

The Remove Group Conference function allows you to automatically remove
users from a conference according to a range of security levels.




Here is a typical display:

                       ProDoor: Remove Group Conference

ีออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ                                                                            ณ
ณ   Minimum security level:  10_                                             ณ
ณ                                                                            ณ
ณ   Maximum security level:  10_                                             ณ
ณ                                                                            ณ
ณ   First conference number: 45_                                             ณ
ณ                                                                            ณ
ณ   Last conference number:  49_                                             ณ
ณ                                                                            ณ
ิออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออพ

 PgDn [begin]                                     ESC [exit]       ProSM 3.0แ



Minimum security level:  10_
Maximum security level:  10_
   These entries specify the range of security levels to be removed
   from the specified conference.


First conference number:  45
Last conference number:   49
   These entries specify the range of conferences to be removed from
   the selected user registrations.


Press the PGDN key to begin the Remove Group function.
Press the ESC key to cancel the operation.

                         RENUMBER CONFERENCES
                         ====================

The Renumber Conferences function exchanges the information for two
specified conference numbers and updates your CONFINFO, USERS and
EXTUSER data files accordingly.  CNAMES is not updated so renumbering
conference numbers less than 40 is not recommended.

Please insure that all NODES are offline before using this function.

Here is a typical display:

                         ProDoor: Renumber Conference

ีออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ                                                                            ณ
ณ   Original conference number: 1ฐฐ                                          ณ
ณ                                                                            ณ
ณ   New conference number:      2__                                          ณ
ณ                                                                            ณ
ณ      All information for OLD CONFERENCE NUMBER and NEW CONFERENCE NUMBER   ณ
ณ      will be EXCHANGED in USERS and EXTUSER files.                         ณ
ณ                                                                            ณ
ณ      You MUST update your CNAMES file if you renumber                      ณ
ณ      conference numbers less than 40!                                      ณ
ณ                                                                            ณ
ิออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออพ

 PgDn [begin]                                     ESC [exit]       ProSM 3.0แ


Original conference number: 1ฐฐ
New conference number:      2__
   These entries specify the conference numbers that are to be
   exchanged.

   Any two conferences may be selected, but it is recommended that you
   exchange ONLY conferences greater than 39.

   If you exchange a conventional conference (numbered 0 through 39) you
   must also edit the pcboard CNAMES file to reflect the new conference
   numbering.

        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        *                         IMPORTANT                         *
        *                                                           *
        *      IF EITHER OF THE CONFERENCE NUMBERS TO BE            *
        *      EXCHANGED ARE IN THE RANGE 0 TO 39 YOU MUST          *
        *      ACCESS THE 'CONFERENCE DEFINITIONS' SCREEN AND       *
        *      USE THE 'F10 [UPDATE CNAMES FILE]' COMMAND TO        *
        *      STORE THE NEW CONFERENCE INFORMATION FOR PCBOARD.    *
        *                                                           *
        * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Press the PGDN key to begin the Renumber Conferences function.
Press the ESC key to cancel the operation.

                              FILE FORMATS
                              ============

I am releasing file layout information to make it possible for other
utility and door authors to create utilities that are compatible with
ProDoor's extended conference system.

I will make every effort to minimize format changes in these files, but
the actual formats cannot be frozen until the final production release
of the code.

CONFINFO FILE
-------------

   The conference information file is a random-access binary file.  Each
   record defines a message area.  The first record defines the "Main
   Board", the next record defines "Conference 1" and so on up to
   "Conference 255".  The size of this file determines the number of
   active conferences.  A dead record in this file is indicated by the
   conf_name field being a null string.

   {bit values in conf_flags}
   conf_scan_blts    = 1;     {qmail include blts?}
   conf_scan_files   = 2;     {qmail scan new files?}

   pcbconf_rec = record
      conf_name:                string[10];     {conference name}
      conf_private_ul:          boolean;        {make all uploads private?}
      conf_private_mail:        boolean;        {make all mail private?}
      conf_echo_mail:           boolean;        {allow echo mail?}
      conf_addsec:              integer;        {added security}
      conf_addtime:             integer;        {added minutes}
      conf_msgblocks:           integer;        {index blocks; 1024 msgs each}
      conf_msgfile:             string[31];     {message base pathname}
      conf_public_uplist:       string[31];     {public uploads listings}
      conf_updir:               string[31];     {public upload dir}
      conf_private_uplist:      string[31];     {private uploads listings}
      conf_private_updir:       string[31];     {private uploads dir}
      conf_newsfile:            string[31];     {conference news pathname}
      conf_doormenu:            string[31];     {door menu pathname}
      conf_doorinfo:            string[31];     {door info data pathname}
      conf_bltmenu:             string[31];     {bulletin menu pathname}
      conf_bltinfo:             string[31];     {bulletin info pathname}
      conf_spare1:              integer;        {undefined}
      conf_dirmenu:             string[31];     {file area menu pathname}
      conf_dirinfo:             string[31];     {file area info pathname}
      conf_spare2:              integer;        {undefined}
      conf_dlinfo:              string[31];     {download path info pathname}
      conf_public:              boolean;        {is this conference public?}
      conf_packopt:             string[15];     {propack command line options}
      conf_flags:               byte;           {Qmail flag bits}
      conf_spare3:              byte;           {spare flag bits}
      conf_msgs_read:           single;         {messages downloaded/read}
      conf_msgs_entered:        single;         {messages uploaded/entered}
      conf_spare4:              char6;          {unallocated}
   end;

EXTUSER FILE
------------

   The extended user information file is a random-access binary file
   which records information about each ProDoor user.  This file
   contains extended conference registration, scanning preferences and
   last-read pointers.  The file format is variable and depends on the
   maximum number of conferences to be allocated.  As of 12-11-88
   standard prodoor versions allow 90 external conferences, giving a
   total of 130 message areas.  Use the 'EXTADJ' utility found in
   EXTADJ10.ZIP to allocate additional conferences, up to a limit of
   255.  A special entry in the PCBoard USERS file is used as a
   record-number pointer into this file, eliminating the need for
   time-consuming searches when accessing this file.

   const
      max_conf = 39;               {highest standard conference number}
      min_econf = max_conf+1;      {lowest extended conference number}
      max_econf = 255;             {highest extended conference number}
 
      {bit values in conf[n].ext_flags}
      ext_scan       = 1;           {are we scanning this conf?}
      ext_dly        = 2;           {download only your own messages}
      ext_qnet       = 4;           {qnet status}
      ext_sysop      = 8;           {sysop status}
      ext_joined     = 16;          {have we joined today?}
      ext_ro         = 32;          {read/only status}
      ext_priv       = 64;          {uploads private??}
      ext_member     = 128;         {are a member of this conf?}

   type      (* layout of extended user information file *)
      (* fixed portion of extended user record *)
      extuser_fixed_rec = record
         extcount: byte;         {number of extended conferences in first rec}
         spare0:   char4;        {unallocated spares}
         name:     char25;       {user name}
         spare1:   char;         {unallocated spare}
         lastdate: char8;        {last date of access mm-dd-yy}
         spare2:   char40;       {unallocated spares}
         spare3:   char40;       {used by qmail}
      end;

      (* variable portion of extended user record *)
      extuser_conf_rec = record
         flags:    byte;         {flag bits}
         lastread: single;       {last message read}
      end;

      extuser_rec = record
         fixed:   extuser_fixed_rec;      {fixed user info}

         conf:    array[0..max_econf]     {extended conference info}
                  of extuser_conf_rec;
      end;


   The first byte of the first record in this file specifies the value
   of 'extcount', which is the maximum number of extended conferences
   that are allowed by the file size.  ProDoor will recognize values
   between 0 and 215, but will always create files with a setting of 90.
   I may allow configuration of this value in a future version.

   Each user record in this file is stored in two parts.  The 'fixed'
   information and the 'conference' information.  The standard procedure
   for accessing this file is to

        1. seek to the start of the desired user record

        2. read the fixed information

        3. read the required portion of the variable size conference
           table.

   For convenience, ProDoor (and the associated libraries) build an
   image of the standard 40 message areas so that application programs
   can uniformly access all conferences, regardless of if they are
   standard or extended.

   Note that any program accessing this file must compare the 'lastdate'
   field with the current date.  If the dates are different, the program
   must set all 'ext_joined' flags to false and update 'lastdate'.  This
   insures that "added minutes" for joining a conference are awarded
   only once per day.


USERS FILE
----------

   ProDoor modifies the PCBoard USERS file to include a special
   'extrarec' entry that is used as a record-number pointer into the
   EXTUSER file, eliminating the need for time-consuming searches.

   The 'extrarec' variable is an unsigned integer and is stored at
   position 391 in the user record.  The first 390 bytes are skipped.
   The value of 'extrarec' is 0 for the first record in the EXTUSER
   file, 1 for the next record, and so on.

   When accessing this file, PCBoard will initially have two spaces in
   this file position.  ProDoor automatically verifies that this pointer
   is correct, and will scan the EXTUSER file to locate a "lost"
   extended user record when the indicated record has a different name.
   This scan is required if the sysop deletes the EXTUSER file, since
   the new file will be rebuilt in a different order than the original
   file.  Any other program that accesses this file must ensure that the
   EXTUSER record indicated by the USER record pointer is in fact the
   correct record.

   ProDoor allocates several other variables in the 'undefined' area of
   the PCBoard USER file record.  These variables are documented only to
   prevent other door and utility authors from inadvertently using them
   for another purpose.

     File
   Position      Name        Type         Use

     391      extrarec:      word;      Record number in EXTUSER file
     393      flags:         byte;      ProDoor's flag bits
     394      mailconf:      byte;      Conf.# where mail is waiting
     395      scratchnum:    byte;      Scratch file number
     396      dooruse:       byte;      Times in prodoor, up to 255
     397      earned_k:      word;      Earned KBytes
     399                     char2      used by qmail??

   Bit definitions in user.flags byte:
      flag_hasmail = $01    ;user has mail waiting?
      flag_expert  = $02    ;is user an expert?
      flag_hotkeys = $04    ;does user want hotkeys?
      flag_init    = $20    ;set before prodoor runs the first time


DATA TYPES
----------

   To assist programmers using other languages, I will explain the data
   formats that I am using in these files.


     Type         Format

     boolean      A byte containing 1 for 'true' and 0 for 'false'.
     byte         A byte containing numbers from 0 to 255.
     word         A 2-byte unsigned integer from 0 to 65535.
     integer      A 2-byte signed integer from -32765 to 32767.
     char         A byte containing the ascii code for a character.
     charN        An array of N characters; padded with spaces.
     stringN      A 'length' byte followed by an array of N characters.
     single       A 4-byte microsoft BASIC format single precision float.

